<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>메인페이지</title>
  <!--    BootStrap Library-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Dongle:wght@700&family=Jua&family=Noto+Serif+KR:wght@200&display=Gowun+Dodum&display=swap"
        rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
  <!--    JQuery-->
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <!--    JQuery Cookie-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
  <!--    fontawesome-->
  <script src="https://kit.fontawesome.com/2fb62d0520.js" crossorigin="anonymous"></script>
  <!--    calendar-->
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.7.0/main.min.css">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/fullcalendar@5.7.0/main.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<style>
  #leftNav {transition: 0.5s}
  .leftMenu {background: none; border: 0; border-bottom: 1px solid black; width: 90%; padding: 10px; transition: 0.5s; border-radius: 5px;}
  .leftMenu:hover {background: #777}

  #calendarBox{
    width: 100%;
  }

  #calendarBox > div {
    float: left;
  }

  .fc-toolbar-title {
    margin-left: 550px !important;
    font-weight: bold;
  }

  .fc-col-header-cell {
	background-color: #ffe0ef;
  }

  .fc-day a {
    color: black;
    text-decoration: none;
  }

  .fc-day-sun a {
    color: red;
    text-decoration: none;
  }

  .fc-day-sat a {
    color: blue;
    text-decoration: none;
  }
  .fc-header-toolbar{

    margin-bottom: 0 !important;
    height: 120px;
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function () {
  var calendarEl = document.getElementById('calendar');
  var calendar = new FullCalendar.Calendar(calendarEl, {
    height: 750,
    contentHeight: 180,
    timeZone: 'UTC',
    initialView: 'dayGridMonth',
    // locale: 'ko',
    titleFormat: function (date) {
      year = date.date.year;
      month = date.date.month + 1;
      return year + "년 " + month + "월";
    },
    events: function (info, success, failure) {
      // BucketList 데이터 가져오기
      fetch('http://localhost:3000/calendar/preview/bucket')
        .then((response) => response.json())
        .then((data) => {
          const bucket = data.data;
          const events = [];
          for (let i = 0; i < bucket.length; i++) {
            events.push({
              title: bucket[i].title,
              start: bucket[i].d_day,
              color: '#FF7F50', // bucket 이벤트는 주황색으로 표시
            });
          }

          // // TodoList 데이터 가져오기
          // fetch('http://localhost:3000/calendar/preview/todo')
          //   .then((response) => response.json())
          //   .then((data) => {
          //     const todo = data.data;
          //     for (let i = 0; i < todo.length; i++) {
          //       events.push({
          //         title: todo[i].title,
          //         start: todo[i].d_day, // 이벤트 시작 날짜
          //       });
          //     }
          //     success(events);
          //   })
          //   .catch((error) => {
          //     failure(error);
          //   });
        })
        .catch((error) => {
          failure(error);
        });
      },
    });
    calendar.render();
  });
  
  // TodoList 미리보기
  fetch(`http://localhost:3000/calendar/preview/todo`)
    .then((response) => response.json())
    .then((data) => {
      const todo = data.data;
      for (let i = 0; i < todo.length; i++){
        const todoo = `<p style="line-height:5px">${todo[i].title}<hr style="width: 60%; margin-left: auto; margin-right: auto;"/></p>`;
        const p = document.createElement('p');
        p.innerHTML = todoo;
        document.getElementById('todoPreview').appendChild(p);
      }
    });

  // BucketList 미리보기
  fetch(`http://localhost:3000/calendar/preview/bucket`)
    .then((response) => response.json())
    .then((data) => {
      const bucket = data.data;
      for (let i = 0; i < bucket.length; i++){
        const buckett = `<p style="line-height:5px">${bucket[i].title}<hr style="width: 60%; margin-left: auto; margin-right: auto;"/></p>`;
        const p = document.createElement('p');
        p.innerHTML = buckett;
        document.getElementById('bucketPreview').appendChild(p);
      }
    });

  // 페이지네이션
  // var page = 2;
  // var k = '';
  // $(window).scroll(function() {
  //   if ($(window).scrollTop() == $(document).height() - $(window).height()) {
  //     show_table(page);
  //     if(k!=undefined){
  //       alert('page가 변경됩니다.')
  //       page++;
  //     }
  //   }
  // });
  // 목록 받아오기 받아오면 뿌려줄때 갯수에 따라 페이지 네이션 되게함

  function imageChange(){
    $(event.target).parents('.col-md-6').css('background-image','url("img/ac2.png")','transition', '0.5s','background-size','100% 100%');
  }
  function imageChange2(){
    $(event.target).parents('.col-md-6').css('background-image','url("img/abc.png" )','transition', '0.5s');
  }

</script>
<body>
  <!--네비게이션-->
  <%-include('./topNav')%>
  <!--바디-->
  <div clsss="container-fluid" style="background-size: 100% 100%; margin-top: 130px;">
    <div class = "container" style="background-image: url('img/main1.png'); background-size: 100% 100%; padding-top: 50px; padding-right: 20px; padding-bottom: 10px;">
      <!--   달력 들어가야 하는부분-->
      <section style="height: 800px; border-radius: 5px;">
        <div class="container-fluid" style="height:800px; text-align: center; padding-top: 20px; margin:0;" id="calendarBox" >
          <div id="calendar" style="width: 100%;"></div>
        </div>
      </section>
  </div>
  </div>
  <div clsss="container-fluid">
    <div class = "container">
      <section style="height:650px;">
        <div class="container-fluid">
          <div class = "row" style="margin-top:20px;">
            <div class = "col-md-6" style="min-height: 720px; background-image: url('img/abc.png'); background-size: 100% 100%; width: 48%; padding-top: 60px;">
              <div class="row" style="margin-top: 60px; margin-bottom: 30px;">
                <div class="col-md-3"></div>
                <div class="col-md-6" style="padding: 0">
                  <h3 style="text-align: center;"><img src="/img/to-do-list.png" style="width:50px; height:50px;">TODO 리스트</h3>
                </div>
                <div class="col-md-3" style="padding-left:20px; line-height: 58px; ">
                  <p style="text-align: left; padding-right:70px; margin:0;"><a href="/page/todoListMonth" style="color: blue; font-weight: bold; text-decoration-line: none;" class="more" onmouseover="imageChange()" onmouseleave="imageChange2()">+More</a></p>
                </div>
              </div>
              <div style="text-align: center; border-radius: 10px;" id="todoPreview">
            </div>
            </div>
            <div class = "col-md-6" style=" min-height: 720px; background-image: url('img/abc.png'); background-size: 100% 100%; margin-left: 50px; width: 48%; padding-top: 60px;">
              <div class="row" style="margin-top: 60px; margin-bottom: 30px;">
                <div class="col-md-3"></div>
                <div class="col-md-6" style="padding: 0">
                  <h3 style="text-align: center;"><img src="/img/bucket-list.png" style="width:50px; height:50px;">버킷 리스트</h3>
                </div>
                <div class="col-md-3" style="padding-left:20px; line-height: 58px; ">
                  <p style="text-align: right; padding-right: 70px;"><a href="/page/bucketList" style="color: blue; font-weight: bold; text-decoration-line: none;" class="more" onmouseover="imageChange()" onmouseleave="imageChange2()">+More</a></p>
                </div>
              </div>  
              <div style="text-align: center;" id="bucketPreview"></div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
  <!--    추후 업데이트 예정-->
  <!-- <section>
    <div class="container-fluid" style="background: aqua; text-align: center; height:400px; margin-top: 50px;">
      <h1 style="line-height: 400px;">추후 업데이트 예정입니다.</h1>
    </div>
  </section> -->
  <!-- <footer>
    <div class="container-fluid" style="background: #333; text-align: center; height:100px; ">
        <h6 style="line-height: 100px; color:#ccc;">Copyright <i class="fa-regular fa-copyright"></i>  2023. 투두리 All rights reserved.</h6>
    </div>
  </footer> -->
</body>
</html>